import( "../build/input/init_free/field/script/field.bf" );
import( "../ModMenu/ModMenu.flow" );
import( "../Setup/FirstTimeSetup.flow" );

//EXTENSIONS
import ( "../OtherMods/FindAFriend.flow" ); //Fast travel to social link locations
import ( "../OtherMods/QuickTravelPlus.flow" ); //Extended quickTravel locations for town/school
import ( "../OtherMods/VRGameOverSkip.flow" ); //Skips velvet room scene after game over
import ( "../OtherMods/DungeonOptions/DungeonOptions.flow" ); //Various QoL Dungeon Options
import ( "../OtherMods/ConsistentReaperField.flow" ); //Hooks field functions for consistent reaper 
import ( "../OtherMods/MobileCalendar.flow" );

void TurnOnAllOptions()
{
	// Uncomment to enable options without setup
	BIT_ON(6420); //Disable First Time Setup
	BIT_ON(6421); //Mod Menu
	BIT_ON(6422); // QuickTravelPlus
	BIT_ON(6423); // MobileCalendar
	BIT_ON(6424); // DungeonOptions
	BIT_ON(6425); // Find a Friend
	BIT_ON(5678); // Spoiler-free find a friend
	BIT_ON(6426); // Save Anywhere
	BIT_ON(6427); // Game over skip
	BIT_ON(6428); //Reap-Balanced Encounters
	BIT_ON(6430); //Enable Fox (DungeonOptions)
	BIT_ON(6431); //Enable Floor Select (DungeonOptions)
	BIT_ON(6432); //Enable Goho-M (DungeonOptions)
	BIT_ON(6433); //Enable Organize Party (DungeonOptions)
}

void order_party_hook()
{
	restart:
	
	bool modMenu = BIT_CHK(6421); //Mod menu with many different debugging options
	bool mobileCalendar = BIT_CHK(6423); //Quickly open Calendar
	bool findAFriend = BIT_CHK(6425); //Fast travel to social link locations
	bool saveAnywhere = BIT_CHK(6426); //Save anywhere
	
	
	//First Time Setup
	if (!BIT_CHK(6420))
	{
		MenuOptions();
		//TurnOnAllOptions();
		goto restart;
	}

	if (!modMenu)
	{
		options = false;
		if ( GET_FLOOR_ID() > 0)
		{
			dungeon_order();
		}
		else
		{
			field_order();
		}
		if (options)
			goto restart;
	}
	//Multiple options
	else 
	{
		if (ModMenuDisplay() == -1)
			goto restart;
	}
}
